import { storage } from './server/storage';
import { InsertProduct, InsertCategory } from './shared/schema';

async function import36VCategory() {
  console.log('–°–æ–∑–¥–∞—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç 3,6V" –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ç–æ–≤–∞—Ä—ã...');
  
  try {
    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
    const newCategory: InsertCategory = {
      name: '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç 3,6V',
      slug: 'akkumulyatornyy-instrument-3-6v',
      description: '–ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º 3,6V –æ—Ç P.I.T Tools. –ò–¥–µ–∞–ª—å–Ω—ã –¥–ª—è —Ç–æ—á–Ω—ã—Ö —Ä–∞–±–æ—Ç –∏ –±—ã—Ç–æ–≤–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.',
      isActive: true
    };

    console.log('–°–æ–∑–¥–∞—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é...');
    const category = await storage.createCategory(newCategory);
    console.log(`–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∞ —Å ID: ${category.id}`);

    // –¢–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç 3,6V"
    const products36V = [
      {
        name: '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π –∫–ª–µ–µ–≤–æ–π –ø–∏—Å—Ç–æ–ª–µ—Ç P.I.T. PEC3.6P-7A',
        price: 1760,
        description: '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π –∫–ª–µ–µ–≤–æ–π –ø–∏—Å—Ç–æ–ª–µ—Ç 3,6–í —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–æ–º 1,5–ê—á. –í –∫–æ–º–ø–ª–µ–∫—Ç–µ 300 —Å—Ç–µ—Ä–∂–Ω–µ–π 7–º–º. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 120–≥/—á–∞—Å. –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –∏ —É–¥–æ–±–Ω—ã–π –¥–ª—è —Ç–æ—á–Ω—ã—Ö —Ä–∞–±–æ—Ç.',
        shortDescription: '–ö–ª–µ–µ–≤–æ–π –ø–∏—Å—Ç–æ–ª–µ—Ç 3,6–í, 1,5–ê—á, 300 —Å—Ç–µ—Ä–∂–Ω–µ–π 7–º–º, 120–≥/—á–∞—Å',
        imageUrl: '/upload/resize_cache/iblock/765/gxvoj2eyubvmvd1a10l5aulo0untcvop/600_600_140cd750bba9870f18aada2478b24840a/PEC3.6P-7A.png',
        sku: 'PEC3.6P-7A',
        isFeatured: true,
        tags: ['–ê–∫—Ü–∏—è', '–ù–æ–≤–∏–Ω–∫–∞', '–°–æ–≤–µ—Ç—É–µ–º', '–•–∏—Ç']
      },
      {
        name: '–û—Ç–≤–µ—Ä—Ç–∫–∞ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω–∞—è P.I.T. PD03P3.6-006',
        price: 2090,
        description: '–ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω–∞—è –æ—Ç–≤–µ—Ä—Ç–∫–∞ 3,6–í —Å –∫—Ä—É—Ç—è—â–∏–º –º–æ–º–µ–Ω—Ç–æ–º 3,5–ù–º. –ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä 1,3–ê—á. –í –∫–æ–º–ø–ª–µ–∫—Ç–µ 15 –±–∏—Ç, –ø–æ–≤–æ—Ä–æ—Ç–Ω–∞—è —Ä—É–∫–æ—è—Ç–∫–∞, USB –∑–∞—Ä—è–¥–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, —Ñ–æ–Ω–∞—Ä–∏–∫.',
        shortDescription: '–û—Ç–≤–µ—Ä—Ç–∫–∞ 3,6–í, 3,5–ù–º, 1,3–ê—á, 15 –±–∏—Ç, USB –ó–£, —Ñ–æ–Ω–∞—Ä–∏–∫',
        imageUrl: '/upload/resize_cache/iblock/9e4/67i18u2o0aaik1db59e12xhqxnx3zjsu/600_600_140cd750bba9870f18aada2478b24840a/a183d367-ddf8-11e9-857b-0cc47adbc069_1a85e778-444f-11eb-80d3-0cc47adbc069.jpeg',
        sku: 'PD03P3.6-006',
        isFeatured: true
      },
      {
        name: '–û—Ç–≤–µ—Ä—Ç–∫–∞ –∞–∫–∫—É–º. P.I.T. PES3.6P-24A (3,6–í, 2–ù–º, 1.3–ê—á, –±–∏—Ç—ã 23—à—Ç, USB –ó–£, LED –ø–æ–¥—Å–≤–µ—Ç–∫–∞, —á–µ—Ö–æ–ª)',
        price: 3190,
        description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω–∞—è –æ—Ç–≤–µ—Ä—Ç–∫–∞ 3,6–í —Å –∫—Ä—É—Ç—è—â–∏–º –º–æ–º–µ–Ω—Ç–æ–º 2–ù–º. –ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä Li-ion 1,3–ê—á. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∏–∑ 23 –±–∏—Ç, USB –∑–∞—Ä—è–¥–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, LED –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω—ã, —É–¥–æ–±–Ω—ã–π —á–µ—Ö–æ–ª –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è.',
        shortDescription: '–û—Ç–≤–µ—Ä—Ç–∫–∞ 3,6–í, 2–ù–º, 1,3–ê—á, 23 –±–∏—Ç—ã, LED, —á–µ—Ö–æ–ª',
        imageUrl: '/upload/resize_cache/iblock/537/e1mk12zkkitnmtm9nycxn8vzshmm5ryg/600_600_140cd750bba9870f18aada2478b24840a/fbf8cdc9-b3b6-11eb-80c4-000c29ab357b_e53fb036-649a-11ec-80db-000c29ab357b.jpeg',
        sku: 'PES3.6P-24A',
        isFeatured: true
      },
      {
        name: '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω–∞—è –æ—Ç–≤–µ—Ä—Ç–∫–∞ P.I.T. PSD3.6-2A Mini',
        price: 1590,
        description: '–ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –º–∏–Ω–∏-–æ—Ç–≤–µ—Ä—Ç–∫–∞ 3,6–í –¥–ª—è —Ç–æ—á–Ω—ã—Ö —Ä–∞–±–æ—Ç. –ö—Ä—É—Ç—è—â–∏–π –º–æ–º–µ–Ω—Ç 2–ù–º, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä 2–ê—á. –ò–¥–µ–∞–ª—å–Ω–∞ –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏, –º–µ–±–µ–ª—å–Ω–æ–π —Ñ—É—Ä–Ω–∏—Ç—É—Ä—ã –∏ –º–µ–ª–∫–æ–≥–æ —Ä–µ–º–æ–Ω—Ç–∞.',
        shortDescription: '–ú–∏–Ω–∏-–æ—Ç–≤–µ—Ä—Ç–∫–∞ 3,6–í, 2–ù–º, 2–ê—á, –¥–ª—è —Ç–æ—á–Ω—ã—Ö —Ä–∞–±–æ—Ç',
        sku: 'PSD3.6-2A-MINI',
        isFeatured: false
      },
      {
        name: '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω–∞—è –¥—Ä–µ–ª—å-–æ—Ç–≤–µ—Ä—Ç–∫–∞ P.I.T. PDD3.6V-1.5A',
        price: 2890,
        description: '–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –¥—Ä–µ–ª—å-–æ—Ç–≤–µ—Ä—Ç–∫–∞ 3,6–í —Å —Ñ—É–Ω–∫—Ü–∏–µ–π —Å–≤–µ—Ä–ª–µ–Ω–∏—è –∏ –∑–∞–∫—Ä—É—á–∏–≤–∞–Ω–∏—è. –ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä 1,5–ê—á, –ø–∞—Ç—Ä–æ–Ω –¥–æ 6–º–º, 2 —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã. –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –∏ –ª–µ–≥–∫–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è.',
        shortDescription: '–î—Ä–µ–ª—å-–æ—Ç–≤–µ—Ä—Ç–∫–∞ 3,6–í, 1,5–ê—á, –ø–∞—Ç—Ä–æ–Ω 6–º–º, 2 —Å–∫–æ—Ä–æ—Å—Ç–∏',
        sku: 'PDD3.6V-1.5A',
        isFeatured: false
      },
      {
        name: '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π –ø–∞—è–ª—å–Ω–∏–∫ P.I.T. PSI3.6V-8W',
        price: 2490,
        description: '–ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π –ø–∞—è–ª—å–Ω–∏–∫ 3,6–í –º–æ—â–Ω–æ—Å—Ç—å—é 8–í—Ç. –ë—ã—Å—Ç—Ä—ã–π –Ω–∞–≥—Ä–µ–≤ –¥–æ 380¬∞C, –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –¥–æ 45 –º–∏–Ω—É—Ç. USB –∑–∞—Ä—è–¥–∫–∞, LED –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏.',
        shortDescription: '–ü–∞—è–ª—å–Ω–∏–∫ 3,6–í, 8–í—Ç, 380¬∞C, USB –∑–∞—Ä—è–¥–∫–∞, LED',
        sku: 'PSI3.6V-8W',
        isFeatured: false
      },
      {
        name: '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π —Ä–µ–∑–∞–∫ P.I.T. PCS3.6V-Hot',
        price: 3490,
        description: '–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π –≥–æ—Ä—è—á–∏–π —Ä–µ–∑–∞–∫ 3,6–í. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–æ 450¬∞C, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–µ–∑–∫–∏ –ø–µ–Ω–æ–ø–ª–∞—Å—Ç–∞, —Ç–∫–∞–Ω–∏, –ø–ª–∞—Å—Ç–∏–∫–∞. –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –¥–æ 60 –º–∏–Ω—É—Ç.',
        shortDescription: '–ì–æ—Ä—è—á–∏–π —Ä–µ–∑–∞–∫ 3,6–í, 450¬∞C, —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π',
        sku: 'PCS3.6V-HOT',
        isFeatured: false
      },
      {
        name: '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π —Å—Ç–µ–ø–ª–µ—Ä P.I.T. PST3.6V-8mm',
        price: 4190,
        description: '–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–ø–ª–µ—Ä 3,6–í –¥–ª—è —Å–∫–æ–± 6-8–º–º. –ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä 2–ê—á, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–∞—á–∞ —Å–∫–æ–±, –º–∞–≥–∞–∑–∏–Ω –Ω–∞ 50 —Å–∫–æ–±. –ó–∞—â–∏—Ç–∞ –æ—Ç —Ö–æ–ª–æ—Å—Ç—ã—Ö –≤—ã—Å—Ç—Ä–µ–ª–æ–≤.',
        shortDescription: '–°—Ç–µ–ø–ª–µ—Ä 3,6–í, —Å–∫–æ–±—ã 6-8–º–º, 2–ê—á, –∞–≤—Ç–æ–ø–æ–¥–∞—á–∞',
        sku: 'PST3.6V-8MM',
        isFeatured: false
      },
      {
        name: '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π –≥—Ä–∞–≤–µ—Ä P.I.T. PGR3.6V-Multi',
        price: 3890,
        description: '–ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π –≥—Ä–∞–≤–µ—Ä 3,6–í. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å 8000-25000 –æ–±/–º–∏–Ω. –í –∫–æ–º–ø–ª–µ–∫—Ç–µ 20 –Ω–∞—Å–∞–¥–æ–∫, –≥–∏–±–∫–∏–π –≤–∞–ª, –∫–µ–π—Å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è.',
        shortDescription: '–ì—Ä–∞–≤–µ—Ä 3,6–í, 8000-25000 –æ–±/–º–∏–Ω, 20 –Ω–∞—Å–∞–¥–æ–∫',
        sku: 'PGR3.6V-MULTI',
        isFeatured: false
      },
      {
        name: '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π –Ω–æ–∂ P.I.T. PKN3.6V-Foam',
        price: 2790,
        description: '–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π –Ω–æ–∂ 3,6–í –¥–ª—è —Ä–µ–∑–∫–∏ –ø–µ–Ω–æ–ø–ª–∞—Å—Ç–∞ –∏ –∏–∑–æ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤. –ù–∞–≥—Ä–µ–≤–∞–µ–º–æ–µ –ª–µ–∑–≤–∏–µ, —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã 90 –º–∏–Ω—É—Ç.',
        shortDescription: '–ù–æ–∂ –¥–ª—è –ø–µ–Ω–æ–ø–ª–∞—Å—Ç–∞ 3,6–í, –Ω–∞–≥—Ä–µ–≤, 90 –º–∏–Ω —Ä–∞–±–æ—Ç—ã',
        sku: 'PKN3.6V-FOAM',
        isFeatured: false
      }
    ];

    console.log(`–ò–º–ø–æ—Ä—Ç–∏—Ä—É—é ${products36V.length} —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é...`);
    
    const productsToImport: InsertProduct[] = [];

    for (let i = 0; i < products36V.length; i++) {
      const product = products36V[i];
      
      const insertProduct: InsertProduct = {
        sku: product.sku,
        name: product.name,
        slug: product.name
          .toLowerCase()
          .replace(/[^a-z–∞-—è0-9\s]/g, '')
          .replace(/\s+/g, '-')
          .replace(/-+/g, '-')
          .replace(/^-|-$/g, ''),
        description: product.description,
        shortDescription: product.shortDescription,
        price: product.price,
        originalPrice: Math.random() > 0.7 ? Math.floor(product.price * 1.15) : null,
        categoryId: category.id,
        imageUrl: product.imageUrl || null,
        stock: Math.floor(Math.random() * 20) + 5,
        isActive: true,
        isFeatured: product.isFeatured || false,
        tag: product.tags ? product.tags.join(', ') : '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç 3,6V'
      };

      productsToImport.push(insertProduct);
    }

    // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–æ–≤–∞—Ä—ã
    console.log('–ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ç–æ–≤–∞—Ä—ã –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö...');
    const result = await storage.bulkImportProducts(productsToImport);
    
    console.log(`\n‚úÖ –ö–ê–¢–ï–ì–û–†–ò–Ø "–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç 3,6V" –°–û–ó–î–ê–ù–ê`);
    console.log(`üì¶ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: ${result.success}`);
    console.log(`‚ùå –û—à–∏–±–æ–∫: ${result.failed}`);
    console.log(`üè∑Ô∏è –¶–µ–Ω–æ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω: ${Math.min(...products36V.map(p => p.price))} - ${Math.max(...products36V.map(p => p.price))} —Ä—É–±.`);
    
    return {
      success: true,
      categoryId: category.id,
      productsImported: result.success,
      failed: result.failed,
      total: productsToImport.length
    };

  } catch (error: any) {
    console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:', error);
    return {
      success: false,
      error: error.message,
      categoryId: 0,
      productsImported: 0,
      failed: 0,
      total: 0
    };
  }
}

import36VCategory().catch(console.error);